<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькуляторы</title>
    <style>
        /* Стили для размещения элементов на странице */
        .container {
            text-align: center;
            margin-top: 50px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">1-й признак делимости Рачинского</h1>
        <div class="mb-3">
            <input type="number" class="form-control" id="num1" placeholder="Введите число n">
        </div>
        <div class="mb-3">
            <input type="number" class="form-control" id="num2" placeholder="Введите число p">
        </div>
        <button class="btn btn-primary" onclick="firstSignOfRachinsky()">Посчитать</button>
        <p class="mt-3"><span id="result1"></span></p>
    </div>
    <script>

function firstSignOfRachinsky() {
            var dividend = parseFloat(document.getElementById('num1').value);
            var divisor = parseFloat(document.getElementById('num2').value);

            var a = 0;
            var b = 0;
            var m = 0;
            var k = 0;
            var n1 = 0;

            var countIteration = 1;
            var solveString = "";
            solveString += "Число n = " + dividend + "\n, ";
            solveString += "Делимое p = " + divisor + "\n";

            while (dividend > divisor && n1 !== dividend) {
                solveString += "<br>\n<i>Итерация " + countIteration + "</i>: " + dividend + "/" + divisor + "<br>";
                countIteration++;

                k = dividend % 10;
                m = (dividend - k) / 10;
                b = divisor % 10;
                a = (divisor - b) / 10;
                n1 = dividend;
                dividend = m * b - a * k;
                solveString += `a = ${a}, b = ${b}, m = ${m}, k = ${k} <br>` + "mb - ka = " + m + " * " + b + " - " + k + " * " + a + " = " + dividend;
            }

            if (dividend < divisor && dividend !== 0) {
                solveString += "\n<br>Ответ: <b>не делится</b>\n";
            } else {
                solveString += "\n<br>Ответ: <b>делится</b>\n";
            }
            console.log(solveString)

            // Выводим результат в элемент с id "result"
            document.getElementById('result1').innerHTML = solveString;
        }
    </script>
    <div class="container mt-5">
        <h1 class="mb-4">2-й признак делимости Рачинского</h1>
        <div class="mb-3">
            <input type="number" class="form-control" id="num3" placeholder="Введите число n">
        </div>
        <div class="mb-3">
            <input type="number" class="form-control" id="num4" placeholder="Введите число p">
        </div>
        <button class="btn btn-primary" onclick="secondSignOfRachinsky()">Посчитать</button>
        <p class="mt-3"><span id="result2"></span></p>
    </div>    
    <script>
        function secondSignOfRachinsky() {
            var dividend = parseFloat(document.getElementById('num3').value);
            var divisor = parseFloat(document.getElementById('num4').value);

            var b = 0;
            var m = 0;
            var k = 0;
            var q = 0;
            var n1 = 0;
            var breakPoint = 0;

            var countIteration = 1;
            var solveString = "";
            solveString += "Число n: " + dividend + ",\n";
            solveString += " Делимое p: " + divisor + "\n";
            solveString += ", q = (pb* + 1)/10";

            while (dividend > divisor && n1 !== dividend) {
                solveString += "<br>\n<i>Итерация " + countIteration + "</i>: " + dividend + "/" + divisor;
                countIteration++;
                

                k = dividend % 10;
                m = (dividend - k) / 10;
                b = divisor % 10;
                if (b === 1 || b === 9) {
                    b = 10 - b;
                }
                q = (divisor * b + 1) / 10;
                n1 = dividend;
                
                //console.log(dividend);
                dividendPrev = dividend;
                dividend = Math.abs(m + k * q);

                solveString += `<br> b = ${b}, ` + "q = (" + divisor + " * " + b + " + 1)/10 = "+ q +", m = "+ m +", k = " + k +"\n<br>";
                solveString += "m + kq = " + m + " + " + k + " * " + q + " = " + dividend + "\n";

                if (dividendPrev < dividend){
                    console.log("break");
                    breakPoint = 1;
                    break;
                    
                }
            }

            if ((dividend < divisor && dividend !== 0)||(breakPoint == 1)) {
                solveString += "\n<br>Ответ: <b>не делится</b>\n";
            } else {
                solveString += "\n<br>Ответ: <b>делится</b>\n";
            }
            console.log(solveString)
            document.getElementById('result2').innerHTML = solveString;
        }


    </script>
        <div class="container mt-5">
            <h1 class="mb-4">3-й признак делимости Рачинского</h1>
            <div class="mb-3">
                <input type="number" class="form-control" id="num5" placeholder="Введите число n">
            </div>
            <div class="mb-3">
                <input type="number" class="form-control" id="num6" placeholder="Введите число p">
            </div>
            <button class="btn btn-primary" onclick="thirdSignOfRachinsky()">Посчитать</button>
            <p class="mt-3"><span id="result3"></span></p>
        </div> 
        <script>
            function thirdSignOfRachinsky() {
                var dividend = parseFloat(document.getElementById('num5').value);
                var divisor = parseFloat(document.getElementById('num6').value);

                var b = 0;
                var m = 0;
                var k = 0;
                var q = 0;
                var q1 = 0;
                var n1 = 0;

                var countIteration = 1;
                var solveString = "";

                solveString += "Число: " + dividend + "\n";
                solveString += "Делимое: " + divisor + "\n";

                while (dividend > divisor && n1 !== dividend) {
                    solveString += "<br>\n<i>Итерация " + countIteration + "</i>: " + dividend + "/" + divisor;
                    countIteration++;

                    k = dividend % 10;
                    m = (dividend - k) / 10;
                    b = divisor % 10;
                    a = (divisor - b) / 10;
                    if (b === 1 || b === 9) {
                        b = 10 - b;
                    }
                    q = (divisor * b + 1) / 10;
                    q1 = Math.abs(divisor - q);
                    n1 = dividend;
                    dividend = Math.abs(m - k * q1);

                    solveString += `<br>a = ${a}, b = ${b}, `;
                    solveString += "q = (" + divisor + " * " + b + " + 1) / 10 = " + q + "\n";
                    solveString += ", q* = |" + divisor + " - " + q + "| = " + q1 + "\n<br>";
                    solveString += `m = ${m}, k = ${k} <br>`;
                    solveString += "m - kq* = " + m + " - " + k + " * " + q1 + " = " + dividend + "\n";
                }


                if (dividend < divisor && dividend !== 0) {
                    solveString += "\n<br>Ответ: <b>не делится</b>\n";
                } else {
                    solveString += "\n<br>Ответ: <b>делится</b>\n";
                }
                console.log(solveString)
                document.getElementById('result3').innerHTML = solveString;
            }
        </script>
        <div class="container mt-5">
            <h1 class="mb-4">Признак делимости Паскаля</h1>
            <div class="mb-3">
                <input type="number" class="form-control" id="num7" placeholder="Введите число n">
            </div>
            <div class="mb-3">
                <input type="number" class="form-control" id="num8" placeholder="Введите число p">
            </div>
            <button class="btn btn-primary" onclick="signOfPascal()">Посчитать</button>
            <p class="mt-3"><span id="result4"></span></p>
        </div>
        <script>
        var sumNum = 0;
        function RazlozhenieChisla(number) {
            let razlozhenie = '';

            for (let i = 0; i < number.length; i++) {
                razlozhenie += `${number[i]} * 10^${number.length - i - 1}`;

                if (i !== number.length - 1) {
                    razlozhenie += ' + ';
                }
            }

            return razlozhenie;
        }

        function StepennieVicheti(n, d) {
            const stepennoiVichetAsMass = [];

            for (let i = 0; i < n.length; i++) {
                let riseToPower = 1;

                for (let j = 0; j < n.length - i - 1; j++) {
                    riseToPower *= 10;
                }

                stepennoiVichetAsMass[i] = riseToPower % d;
            }

            return stepennoiVichetAsMass;
        }

        function ConvertToMass(number) {
            const numberAsMass = [];

            for (let i = 0; i < number.length; i++) {
                numberAsMass[i] = parseInt(number[i]);
            }

            return numberAsMass;
        }

        function PeremnojenieVichetaAndChisla(n, d) {
            const nAsInt = ConvertToMass(n);
            const r = StepennieVicheti(n, d);

            let rezString = '';
            let rezInt = 0;

            for (let i = 0; i < nAsInt.length; i++) {
                rezString += `${r[i]} * ${nAsInt[i]}`;
                rezInt += nAsInt[i] * r[i];

                if (i !== nAsInt.length - 1) {
                    rezString += ' + ';
                } else {
                    rezString += ` = ${rezInt}`;
                }
            }

            return rezString;
        }

        function signOfPascal() {
            const dividend = parseFloat(document.getElementById('num7').value);
            const divisor = parseFloat(document.getElementById('num8').value);

            const resultDiv = document.getElementById('result4');
            var solveString = "";

            if (!isNaN(dividend) && !isNaN(divisor) && divisor !== 0) {
                let n = dividend.toString();
                let d = divisor.toString();

                solveString += `n = ${dividend}, d = ${divisor} <br>`;
                solveString +=  `${n} = ${RazlozhenieChisla(n)}<br>`;
                 
                solveString += `r = ${PeremnojenieVichetaAndChisla(n, d)}`;
                document.getElementById('result4').innerHTML = solveString;
            }
        }            
        </script> 
        <div class="container mt-5">
            <h1 class="mb-4">Признак делимости Лукаса</h1>
            <div class="mb-3">
                <input type="number" class="form-control" id="num9" placeholder="Введите число n">
            </div>
            <div class="mb-3">
                <input type="number" class="form-control" id="num10" placeholder="Введите число p">
            </div>
            <button class="btn btn-primary" onclick="condensationDodgson()">Посчитать</button>
            <p class="mt-3"><span id="result5"></span></p>
        </div>  
            <h1>Метод конденсации Доджсона</h1>
    <textarea id="inputMatrix" rows="5" cols="30" placeholder="Введите матрицу"></textarea><br>
    <button onclick="condensationDodgson()">Выполнить метод конденсации</button><br>
    <textarea id="result" rows="10" cols="50" placeholder="Результат будет здесь"></textarea>
    <script src="dodgson.js"></script>    
        <script>
            function signOfLucas(){
                var dividend = parseFloat(document.getElementById('num9').value);
                var divisor = parseFloat(document.getElementById('num10').value);

                let { leftPart, rightPart } = splitNumber(dividend);
                console.log(`Исходное число: ${dividend}`);
                console.log(`Левая часть: ${leftPart}`);
                console.log(`Правая часть: ${rightPart}`);


            }
            
            function splitNumber(n) {
                let numStr = n.toString();
                let length = numStr.length;
                let leftPart, rightPart;

                if (length % 2 === 0) {
                    // Если число четное, делим равномерно
                    let halfLength = length / 2;
                    leftPart = parseInt(numStr.slice(0, halfLength));
                    rightPart = parseInt(numStr.slice(halfLength));
                } else {
                    // Если число нечетное, правая часть больше на 1 цифру
                    let halfLength = Math.floor(length / 2);
                    leftPart = parseInt(numStr.slice(0, halfLength));
                    rightPart = parseInt(numStr.slice(halfLength));
                }

                return { leftPart, rightPart };
            }
            function condensationDodgson() {
    let inputMatrixStr = document.getElementById('inputMatrix').value;
    let inputMatrix = parseMatrix(inputMatrixStr);
    let n = inputMatrix.length;
    let solveString = '';

    solveString += 'Исходная матрица A0:\n' + matrixToString(inputMatrix) + '\n';

    for (let q = 1; q < n; q++) {
        let Aq = condenseMatrix(inputMatrix, q);
        n = Aq.length; // Обновляем n, так как размер матрицы уменьшается
        solveString += `A${q}:\n` + matrixToString(Aq) + '\n';
        inputMatrix = Aq;
    }

    if (inputMatrix.length === 1 && inputMatrix[0].length === 1) {
        const result = inputMatrix[0][0];
        solveString += `|A| = |An-1| = ${result}`;
    } else {
        solveString += 'Не удалось вычислить результат.';
    }

    document.getElementById('result').value = solveString;
}

        function parseMatrix(matrixStr) {
            const rows = matrixStr.split('\n').map(row => row.trim());
            return rows.map(row => row.split(/\s+/).map(Number));
        }

        function matrixToString(matrix) {
            return matrix.map(row => row.join('\t')).join('\n');
        }

        function condenseMatrix(matrix, q) {
            const n = matrix.length;
            const Aq = [];

            for (let i = 0; i < n - q; i++) {
                Aq.push([]);
                for (let j = 0; j < n - q; j++) {
                    let product = 1;
                    for (let p = 0; p <= q; p++) {
                        for (let r = 0; r <= q; r++) {
                            product *= matrix[i + p][j + r];
                        }
                    }
                    Aq[i].push(product);
                }
            }

            return Aq;
        }


        </script>      
</body>
</html>
